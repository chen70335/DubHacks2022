<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>replit</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
<!-- <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD54LZaGo7pnYQwQDkBbXKG6SO_-7hD7i0&libraries=places"></script> -->
</head>

<script src="script.js"></script>
<body>
  <h1>UW Husky NightDrive</h1>
  <h3>Where are you located? </h3>
  
  <article class="login-bo">
    <form id="currmap">
    <section class="user-box">
        <input type="text" name="loc" id="autocomplete" required>
        <label>Location</label>
      </section>
      <section class="user-box">
        <input type="text" name="dest" id="input-num" required>
        <label>Destination</label>
      </section>
    <a href="./intro.html" onClick="getLocation()" id="submit-request">Next</a>
    </form>
  </article>
  <br>
  <br><br>
  <br><br>
  <br><br>
  <br><br>
  <br><br>
  <br><br>
  <br><br>

  <div id="map"></div>
</body>

<!-- <input type="text"required id="autocomplete" placeholder="Current Location"> -->

<!-- <script>
function initAutocomplete() {
  new google.maps.places.Autocomplete(
          (document.getElementById('autocomplete')),
          {types: ['city']}
   );
}
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD54LZaGo7pnYQwQDkBbXKG6SO_-7hD7i0&libraries=places&callback=initAutocomplete"></script> -->

<script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD54LZaGo7pnYQwQDkBbXKG6SO_-7hD7i0&callback=initMap">
</script>


<script>
  function initMap() {
    var uw = {
      lat: 47.6573,
      lng: -122.3072
    };
    var mapOptions = {
      center: uw,
      zoom: 15
    };
    //google.maps.event.trigger(map, 'resize')

    var map = new google.maps.Map(
      document.getElementById("map"), mapOptions);

    var marker = new google.maps.Marker({
      position: uw,
      map: map
    });

    // Get user's location
    if ('geolocation' in navigator) {
      navigator.geolocation.getCurrentPosition(
        position => {
          console.log(`Lat: ${position.coords.latitude} Lng:   ${position.coords.longitude}`);

          // Set marker's position.
          marker.setPosition({
            lat: position.coords.latitude,
            lng: position.coords.longitude
          });

          // Center map to user's position.
          map.panTo({
            lat: position.coords.latitude,
            lng: position.coords.longitude
          });
        },
        // err => alert(`Error (${err.code}): ${getPositionErrorMessage(err.code)}`)
      );
    } else {
      marker.setPosition(uw)
    }
  }
</script>


</html>